<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>질문 전략 평가</title>
  <style>
    /* 스타일을 설정합니다. */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f7f7f7;
    }

    .container {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 20px;
      text-align: center;
    }

    .question {
      margin-bottom: 20px;
      font-size: 18px;
    }

    .btn {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }

    .btn:last-child {
      margin-right: 0;
    }

    .btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="question-container" class="question"></div>
    <textarea id="answer-input" placeholder="답변을 입력하세요..." rows="4" cols="50"></textarea>
    <button id="back-btn" class="btn">뒤로가기</button>
    <button id="next-btn" class="btn">다음 질문</button>
    <button id="evaluate-btn" class="btn">답변 평가</button>
    <div id="question-index"></div>
  </div>
  <script>
    const questionContainer = document.getElementById('question-container');
    const answerInput = document.getElementById('answer-input');
    const backButton = document.getElementById('back-btn');
    const nextButton = document.getElementById('next-btn');
    const evaluateButton = document.getElementById('evaluate-btn');
    const questionIndexContainer = document.getElementById('question-index');

    const strategies = {
      react: ["React의 주요 특징은 무엇인가요?", "React 컴포넌트를 만드는 방법을 설명해주세요."],
      java: ["Java의 주요 특징은 무엇인가요?", "Java 클래스를 만드는 방법을 설명해주세요."],
      javascript: ["JavaScript의 주요 특징은 무엇인가요?", "JavaScript 컴포넌트를 만드는 방법을 설명해주세요."],
      // 다른 전략에 대한 질문들을 추가할 수 있습니다.
    };

    let currentStrategy = null;
    let currentQuestionIndex = 0;

    // 코드가 지정된 전략을 선택하도록 수정합니다.
    const selectOption = () => {
      const strategy = prompt("어떤 전략을 선택하시겠습니까? (react, java, javascript)");
      currentStrategy = strategy

    console.log(currentStrategy)
      if (strategy && strategy in strategies) {
        return strategy;
      } else {
        alert("react, java, javascript 중에서 선택하세요!");
        return selectOption();
      }
    };


    selectOption();
    const storedAnswers = JSON.parse(localStorage.getItem('answers')) || [];

    if (storedAnswers.length > 0) {
      const lastAnswer = storedAnswers[storedAnswers.length - 1];
     
      const questions = strategies[currentStrategy];
     
      currentQuestionIndex = Math.min(lastAnswer.index + 1, questions.length - 1);
      questionContainer.textContent = questions[currentQuestionIndex];
      answerInput.value = lastAnswer.answer;


      questionIndexContainer.textContent = `문제 ${currentQuestionIndex + 1}/${questions.length}`;

    }

    backButton.addEventListener('click', () => {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        updateQuestionAndAnswer();
      } else {
        alert("더 이상 뒤로 갈 수 없습니다.");
      }
    });

    nextButton.addEventListener('click', () => {
      if (!currentStrategy) {
        alert("새로고침 해주세요.");
        return;
      }

      const questions = strategies[currentStrategy];
      if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        updateQuestionAndAnswer();
      } else {
        alert("더 이상 질문이 없습니다.");
      }
    });

    evaluateButton.addEventListener('click', () => {
      const answer = answerInput.value.trim();
      if (!answer) {
        alert("답변을 입력해주세요.");
        return;
      }

      const existingAnswerIndex = storedAnswers.findIndex(answer => answer.strategy === currentStrategy && answer.index === currentQuestionIndex - 1);
      if (existingAnswerIndex !== -1) {
        storedAnswers[existingAnswerIndex].answer = answer;
      } else {
        storedAnswers.push({ strategy: currentStrategy, answer, index: currentQuestionIndex - 1 });
      }
      // 답변을 지피티에 보내서 채점하고 채점한로직을저장함


      localStorage.setItem(currentStrategy, JSON.stringify(storedAnswers));
      alert("답변이 저장되었습니다.");

// 채점내용을 전부다들고와서 통합체점을함
    
    });

    function updateQuestionAndAnswer() {
      const questions = strategies[currentStrategy];
      questionContainer.textContent = questions[currentQuestionIndex];
      const existingAnswer = storedAnswers.find(answer => answer.strategy === currentStrategy && answer.index === currentQuestionIndex - 1);
      answerInput.value = existingAnswer ? existingAnswer.answer : '';
    
      questionIndexContainer.textContent = `문제 ${currentQuestionIndex + 1}/${questions.length}`;
    }
  </script>
</body>
</html>
 